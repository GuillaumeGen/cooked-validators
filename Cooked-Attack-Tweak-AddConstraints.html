<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Cooked.Attack.Tweak.AddConstraints</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">cooked-validators-0.2.0</span><ul class="links" id="page-menu"><li><a href="src/Cooked.Attack.Tweak.AddConstraints.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Cooked.Attack.Tweak.AddConstraints</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Adding and removing <code>MiscConstraint</code>s from transactions</a></li><li><a href="#g:2">Adding and Removing <code>OutConstraint</code>s</a></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Some attacks that add constraints to or remove constraints from
 transactions.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:addConstraintsTweak">addConstraintsTweak</a> :: <a href="Cooked-Tx-Constraints-Type.html#t:Constraints" title="Cooked.Tx.Constraints.Type">Constraints</a> -&gt; <a href="Cooked-Attack-Tweak-Common.html#t:Tweak" title="Cooked.Attack.Tweak.Common">Tweak</a> <a href="Cooked-Tx-Constraints-Type.html#t:Constraints" title="Cooked.Tx.Constraints.Type">Constraints</a></li><li class="src short"><a href="#v:addMiscConstraintTweak">addMiscConstraintTweak</a> :: <a href="Cooked-Tx-Constraints-Type.html#t:MiscConstraint" title="Cooked.Tx.Constraints.Type">MiscConstraint</a> -&gt; <a href="Cooked-Attack-Tweak-Common.html#t:Tweak" title="Cooked.Attack.Tweak.Common">Tweak</a> (<a href="http://hackage.haskell.org/packages/archive/Cabal/latest/doc/html/Distribution-Compat-Prelude-Internal.html#t:Maybe" title="Distribution.Compat.Prelude.Internal">Maybe</a> <a href="Cooked-Tx-Constraints-Type.html#t:MiscConstraint" title="Cooked.Tx.Constraints.Type">MiscConstraint</a>)</li><li class="src short"><a href="#v:removeMiscConstraintsTweak">removeMiscConstraintsTweak</a> :: (<a href="Cooked-Tx-Constraints-Type.html#t:MiscConstraint" title="Cooked.Tx.Constraints.Type">MiscConstraint</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/Cabal/latest/doc/html/Distribution-Compat-Prelude-Internal.html#t:Maybe" title="Distribution.Compat.Prelude.Internal">Maybe</a> a) -&gt; <a href="Cooked-Attack-Tweak-Common.html#t:Tweak" title="Cooked.Attack.Tweak.Common">Tweak</a> [a]</li><li class="src short"><a href="#v:partitionMaybe">partitionMaybe</a> :: (a -&gt; <a href="http://hackage.haskell.org/packages/archive/Cabal/latest/doc/html/Distribution-Compat-Prelude-Internal.html#t:Maybe" title="Distribution.Compat.Prelude.Internal">Maybe</a> b) -&gt; [a] -&gt; ([b], [a])</li><li class="src short"><a href="#v:addSpendsScriptTweak">addSpendsScriptTweak</a> :: <span class="keyword">forall</span> a. <a href="Cooked-Tx-Constraints-Type.html#t:SpendsConstrs" title="Cooked.Tx.Constraints.Type">SpendsConstrs</a> a =&gt; TypedValidator a -&gt; RedeemerType a -&gt; <a href="Cooked-Tx-Constraints-Type.html#t:SpendableOut" title="Cooked.Tx.Constraints.Type">SpendableOut</a> -&gt; <a href="Cooked-Attack-Tweak-Common.html#t:Tweak" title="Cooked.Attack.Tweak.Common">Tweak</a> (<a href="http://hackage.haskell.org/packages/archive/Cabal/latest/doc/html/Distribution-Compat-Prelude-Internal.html#t:Maybe" title="Distribution.Compat.Prelude.Internal">Maybe</a> <a href="Cooked-Tx-Constraints-Type.html#t:MiscConstraint" title="Cooked.Tx.Constraints.Type">MiscConstraint</a>)</li><li class="src short"><a href="#v:addSpendsPKTweak">addSpendsPKTweak</a> :: <a href="Cooked-Tx-Constraints-Type.html#t:SpendableOut" title="Cooked.Tx.Constraints.Type">SpendableOut</a> -&gt; <a href="Cooked-Attack-Tweak-Common.html#t:Tweak" title="Cooked.Attack.Tweak.Common">Tweak</a> (<a href="http://hackage.haskell.org/packages/archive/Cabal/latest/doc/html/Distribution-Compat-Prelude-Internal.html#t:Maybe" title="Distribution.Compat.Prelude.Internal">Maybe</a> <a href="Cooked-Tx-Constraints-Type.html#t:MiscConstraint" title="Cooked.Tx.Constraints.Type">MiscConstraint</a>)</li><li class="src short"><a href="#v:addMintsTweak">addMintsTweak</a> :: <a href="Cooked-Tx-Constraints-Type.html#t:MintsConstrs" title="Cooked.Tx.Constraints.Type">MintsConstrs</a> a =&gt; <a href="http://hackage.haskell.org/packages/archive/Cabal/latest/doc/html/Distribution-Compat-Prelude-Internal.html#t:Maybe" title="Distribution.Compat.Prelude.Internal">Maybe</a> a -&gt; [MintingPolicy] -&gt; Value -&gt; <a href="Cooked-Attack-Tweak-Common.html#t:Tweak" title="Cooked.Attack.Tweak.Common">Tweak</a> (<a href="http://hackage.haskell.org/packages/archive/Cabal/latest/doc/html/Distribution-Compat-Prelude-Internal.html#t:Maybe" title="Distribution.Compat.Prelude.Internal">Maybe</a> <a href="Cooked-Tx-Constraints-Type.html#t:MiscConstraint" title="Cooked.Tx.Constraints.Type">MiscConstraint</a>)</li><li class="src short"><a href="#v:removeTimeConstraintsTweak">removeTimeConstraintsTweak</a> :: <a href="Cooked-Attack-Tweak-Common.html#t:Tweak" title="Cooked.Attack.Tweak.Common">Tweak</a> POSIXTimeRange</li><li class="src short"><a href="#v:addValidateInTweak">addValidateInTweak</a> :: POSIXTimeRange -&gt; <a href="Cooked-Attack-Tweak-Common.html#t:Tweak" title="Cooked.Attack.Tweak.Common">Tweak</a> (<a href="http://hackage.haskell.org/packages/archive/Cabal/latest/doc/html/Distribution-Compat-Prelude-Internal.html#t:Maybe" title="Distribution.Compat.Prelude.Internal">Maybe</a> <a href="Cooked-Tx-Constraints-Type.html#t:MiscConstraint" title="Cooked.Tx.Constraints.Type">MiscConstraint</a>)</li><li class="src short"><a href="#v:removeSignedByTweak">removeSignedByTweak</a> :: <a href="Cooked-Attack-Tweak-Common.html#t:Tweak" title="Cooked.Attack.Tweak.Common">Tweak</a> [PubKeyHash]</li><li class="src short"><a href="#v:addSignedByTweak">addSignedByTweak</a> :: [PubKeyHash] -&gt; <a href="Cooked-Attack-Tweak-Common.html#t:Tweak" title="Cooked.Attack.Tweak.Common">Tweak</a> (<a href="http://hackage.haskell.org/packages/archive/Cabal/latest/doc/html/Distribution-Compat-Prelude-Internal.html#t:Maybe" title="Distribution.Compat.Prelude.Internal">Maybe</a> <a href="Cooked-Tx-Constraints-Type.html#t:MiscConstraint" title="Cooked.Tx.Constraints.Type">MiscConstraint</a>)</li><li class="src short"><a href="#v:addOutConstraintTweak">addOutConstraintTweak</a> :: <a href="Cooked-Tx-Constraints-Type.html#t:OutConstraint" title="Cooked.Tx.Constraints.Type">OutConstraint</a> -&gt; <a href="Cooked-Attack-Tweak-Common.html#t:Tweak" title="Cooked.Attack.Tweak.Common">Tweak</a> ()</li><li class="src short"><a href="#v:removeOutConstraintsTweak">removeOutConstraintsTweak</a> :: (<a href="Cooked-Tx-Constraints-Type.html#t:OutConstraint" title="Cooked.Tx.Constraints.Type">OutConstraint</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/Cabal/latest/doc/html/Distribution-Compat-Prelude-Internal.html#t:Maybe" title="Distribution.Compat.Prelude.Internal">Maybe</a> a) -&gt; <a href="Cooked-Attack-Tweak-Common.html#t:Tweak" title="Cooked.Attack.Tweak.Common">Tweak</a> [a]</li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:addConstraintsTweak" class="def">addConstraintsTweak</a> :: <a href="Cooked-Tx-Constraints-Type.html#t:Constraints" title="Cooked.Tx.Constraints.Type">Constraints</a> -&gt; <a href="Cooked-Attack-Tweak-Common.html#t:Tweak" title="Cooked.Attack.Tweak.Common">Tweak</a> <a href="Cooked-Tx-Constraints-Type.html#t:Constraints" title="Cooked.Tx.Constraints.Type">Constraints</a> <a href="src/Cooked.Attack.Tweak.AddConstraints.html#addConstraintsTweak" class="link">Source</a> <a href="#v:addConstraintsTweak" class="selflink">#</a></p><div class="doc"><p>Add constraints to a transaction. This tweak uses
 <code>addMiscConstraintsTweak</code> to add <code><a href="Cooked-Tx-Constraints-Type.html#t:MiscConstraint" title="Cooked.Tx.Constraints.Type">MiscConstraint</a></code>s in a conflict-avoiding
 and minimal manner, so read also the comment at that function.</p><p>If there are contradictions between the constraints that are already present
 and the additional constraints, this tweak fails.</p><p><code><a href="Cooked-Tx-Constraints-Type.html#t:OutConstraint" title="Cooked.Tx.Constraints.Type">OutConstraint</a></code>s are always added at the end of the list of output
 constraints, because some contracts rely on the ordering of the (intial
 segment of) the list of transaction outputs. If that's not to your need, you
 might be interested in <code>permutOutTweak</code>.</p><p>The returned <code><a href="Cooked-Tx-Constraints-Type.html#t:Constraints" title="Cooked.Tx.Constraints.Type">Constraints</a></code> will be the constraints that were *actually* added
 to the transaction, which might differ from your specified constraints (but
 only in <code><a href="Cooked-Tx-Constraints-Type.html#t:MiscConstraint" title="Cooked.Tx.Constraints.Type">MiscConstraint</a></code>s, so on the left-hand side of <code><a href="Cooked-Tx-Constraints-Type.html#v::-61--62-:" title="Cooked.Tx.Constraints.Type">:=&gt;:</a></code>). In every
 case, this tweak ensures that every constraint you specified will be
 included in the constraints of the modified transaction.</p></div></div><a href="#g:1" id="g:1"><h1>Adding and removing <code>MiscConstraint</code>s from transactions</h1></a><div class="top"><p class="src"><a id="v:addMiscConstraintTweak" class="def">addMiscConstraintTweak</a> :: <a href="Cooked-Tx-Constraints-Type.html#t:MiscConstraint" title="Cooked.Tx.Constraints.Type">MiscConstraint</a> -&gt; <a href="Cooked-Attack-Tweak-Common.html#t:Tweak" title="Cooked.Attack.Tweak.Common">Tweak</a> (<a href="http://hackage.haskell.org/packages/archive/Cabal/latest/doc/html/Distribution-Compat-Prelude-Internal.html#t:Maybe" title="Distribution.Compat.Prelude.Internal">Maybe</a> <a href="Cooked-Tx-Constraints-Type.html#t:MiscConstraint" title="Cooked.Tx.Constraints.Type">MiscConstraint</a>) <a href="src/Cooked.Attack.Tweak.AddConstraints.html#addMiscConstraintTweak" class="link">Source</a> <a href="#v:addMiscConstraintTweak" class="selflink">#</a></p><div class="doc"><p>This tweak adds <code><a href="Cooked-Tx-Constraints-Type.html#t:MiscConstraint" title="Cooked.Tx.Constraints.Type">MiscConstraint</a></code>s to a transaction, in a way that avoids
 conflicts and also potentially simplifies the constraints. In particular:</p><ul><li>Adding a <code><a href="Cooked-Tx-Constraints-Type.html#v:SpendsPK" title="Cooked.Tx.Constraints.Type">SpendsPK</a></code> for an UTxO which is already consumed by the unmodified
   transaction will leave the transaction unmodified.</li><li>Adding a <code><a href="Cooked-Tx-Constraints-Type.html#v:SpendsScript" title="Cooked.Tx.Constraints.Type">SpendsScript</a></code> for an UTxO that is already consumed by the
   unmodified transaction will lead to failure, unless the <code><a href="Cooked-Tx-Constraints-Type.html#v:SpendsScript" title="Cooked.Tx.Constraints.Type">SpendsScript</a></code>
   constraint on the unmodified transaction uses exactly the same validator,
   redeemer, and datum. In that case, the tweak will leave the transaction
   unmodified.</li><li><code><a href="Cooked-Tx-Constraints-Type.html#v:Mints" title="Cooked.Tx.Constraints.Type">Mints</a></code> constraints are added without any additional checks.</li><li>if any constraint concerning time (i.e. <code><a href="Cooked-Tx-Constraints-Type.html#v:Before" title="Cooked.Tx.Constraints.Type">Before</a></code>, <code><a href="Cooked-Tx-Constraints-Type.html#v:After" title="Cooked.Tx.Constraints.Type">After</a></code>, or <code><a href="Cooked-Tx-Constraints-Type.html#v:ValidateIn" title="Cooked.Tx.Constraints.Type">ValidateIn</a></code>)
   is added, the resulting transaction will only have one <code><a href="Cooked-Tx-Constraints-Type.html#v:ValidateIn" title="Cooked.Tx.Constraints.Type">ValidateIn</a></code>
   constraint, specifying as the validity time range the intersection of all
   the pre-existing time ranges on the transaction and the new time range.</li><li>if a <code><a href="Cooked-Tx-Constraints-Type.html#v:SignedBy" title="Cooked.Tx.Constraints.Type">SignedBy</a></code> constraint is added, the resulting transaction will
   similarly have only one <code><a href="Cooked-Tx-Constraints-Type.html#v:SignedBy" title="Cooked.Tx.Constraints.Type">SignedBy</a></code> constraint, which holds all of the
   signers required by the unmodified transaction, together with the new
   signers.</li></ul><p>The returned <code><a href="Cooked-Tx-Constraints-Type.html#t:MiscConstraint" title="Cooked.Tx.Constraints.Type">MiscConstraint</a></code> is either <code>Just</code> the constraint that was added
 to the transaction, or <code>Nothing</code>, if your constraint was already present on
 the unmodified transaction.</p></div></div><div class="top"><p class="src"><a id="v:removeMiscConstraintsTweak" class="def">removeMiscConstraintsTweak</a> :: (<a href="Cooked-Tx-Constraints-Type.html#t:MiscConstraint" title="Cooked.Tx.Constraints.Type">MiscConstraint</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/Cabal/latest/doc/html/Distribution-Compat-Prelude-Internal.html#t:Maybe" title="Distribution.Compat.Prelude.Internal">Maybe</a> a) -&gt; <a href="Cooked-Attack-Tweak-Common.html#t:Tweak" title="Cooked.Attack.Tweak.Common">Tweak</a> [a] <a href="src/Cooked.Attack.Tweak.AddConstraints.html#removeMiscConstraintsTweak" class="link">Source</a> <a href="#v:removeMiscConstraintsTweak" class="selflink">#</a></p><div class="doc"><p>This tweak removes some <code><a href="Cooked-Tx-Constraints-Type.html#t:MiscConstraint" title="Cooked.Tx.Constraints.Type">MiscConstraint</a></code>s from a transaction. Exactly
 those constraints that return <code>Just</code> something are removed from the
 transaction.</p><p>The tweak returns a list of all the <code>Just</code> values that were returned by the
 removed constraints.</p></div></div><div class="top"><p class="src"><a id="v:partitionMaybe" class="def">partitionMaybe</a> :: (a -&gt; <a href="http://hackage.haskell.org/packages/archive/Cabal/latest/doc/html/Distribution-Compat-Prelude-Internal.html#t:Maybe" title="Distribution.Compat.Prelude.Internal">Maybe</a> b) -&gt; [a] -&gt; ([b], [a]) <a href="src/Cooked.Attack.Tweak.AddConstraints.html#partitionMaybe" class="link">Source</a> <a href="#v:partitionMaybe" class="selflink">#</a></p><div class="doc"><p>Partition a list into two lists, where the first output list contains all
 values that were returned by <code>Just</code>, and the second records all elements of
 the input list that returned <code>Nothing</code>. The order of elements is preserved in
 both output lists.</p></div></div><div class="top"><p class="src"><a id="v:addSpendsScriptTweak" class="def">addSpendsScriptTweak</a> :: <span class="keyword">forall</span> a. <a href="Cooked-Tx-Constraints-Type.html#t:SpendsConstrs" title="Cooked.Tx.Constraints.Type">SpendsConstrs</a> a =&gt; TypedValidator a -&gt; RedeemerType a -&gt; <a href="Cooked-Tx-Constraints-Type.html#t:SpendableOut" title="Cooked.Tx.Constraints.Type">SpendableOut</a> -&gt; <a href="Cooked-Attack-Tweak-Common.html#t:Tweak" title="Cooked.Attack.Tweak.Common">Tweak</a> (<a href="http://hackage.haskell.org/packages/archive/Cabal/latest/doc/html/Distribution-Compat-Prelude-Internal.html#t:Maybe" title="Distribution.Compat.Prelude.Internal">Maybe</a> <a href="Cooked-Tx-Constraints-Type.html#t:MiscConstraint" title="Cooked.Tx.Constraints.Type">MiscConstraint</a>) <a href="src/Cooked.Attack.Tweak.AddConstraints.html#addSpendsScriptTweak" class="link">Source</a> <a href="#v:addSpendsScriptTweak" class="selflink">#</a></p><div class="doc"><p>this tweak ensures that a certain <code><a href="Cooked-Tx-Constraints-Type.html#v:SpendsScript" title="Cooked.Tx.Constraints.Type">SpendsScript</a></code> constraint is present on
 a transaction.</p><p>Adding a <code><a href="Cooked-Tx-Constraints-Type.html#v:SpendsScript" title="Cooked.Tx.Constraints.Type">SpendsScript</a></code> for an UTxO that is already consumed by the
 unmodified transaction will lead to failure, unless the <code><a href="Cooked-Tx-Constraints-Type.html#v:SpendsScript" title="Cooked.Tx.Constraints.Type">SpendsScript</a></code>
 constraint on the unmodified transaction uses exactly the same validator,
 redeemer, and datum. In that case, the tweak will leave the transaction
 unmodified.</p><p>This tweak returns <code>Just</code> the added constraint iff the transaction was
 modified.</p></div></div><div class="top"><p class="src"><a id="v:addSpendsPKTweak" class="def">addSpendsPKTweak</a> :: <a href="Cooked-Tx-Constraints-Type.html#t:SpendableOut" title="Cooked.Tx.Constraints.Type">SpendableOut</a> -&gt; <a href="Cooked-Attack-Tweak-Common.html#t:Tweak" title="Cooked.Attack.Tweak.Common">Tweak</a> (<a href="http://hackage.haskell.org/packages/archive/Cabal/latest/doc/html/Distribution-Compat-Prelude-Internal.html#t:Maybe" title="Distribution.Compat.Prelude.Internal">Maybe</a> <a href="Cooked-Tx-Constraints-Type.html#t:MiscConstraint" title="Cooked.Tx.Constraints.Type">MiscConstraint</a>) <a href="src/Cooked.Attack.Tweak.AddConstraints.html#addSpendsPKTweak" class="link">Source</a> <a href="#v:addSpendsPKTweak" class="selflink">#</a></p><div class="doc"><p>This tweak ensures that a certain <code><a href="Cooked-Tx-Constraints-Type.html#v:SpendsPK" title="Cooked.Tx.Constraints.Type">SpendsPK</a></code> constraint is present on a
 transaction.</p><p>This tweak returns <code>Just</code> the added constraint iff the transaction was
 modified.</p></div></div><div class="top"><p class="src"><a id="v:addMintsTweak" class="def">addMintsTweak</a> :: <a href="Cooked-Tx-Constraints-Type.html#t:MintsConstrs" title="Cooked.Tx.Constraints.Type">MintsConstrs</a> a =&gt; <a href="http://hackage.haskell.org/packages/archive/Cabal/latest/doc/html/Distribution-Compat-Prelude-Internal.html#t:Maybe" title="Distribution.Compat.Prelude.Internal">Maybe</a> a -&gt; [MintingPolicy] -&gt; Value -&gt; <a href="Cooked-Attack-Tweak-Common.html#t:Tweak" title="Cooked.Attack.Tweak.Common">Tweak</a> (<a href="http://hackage.haskell.org/packages/archive/Cabal/latest/doc/html/Distribution-Compat-Prelude-Internal.html#t:Maybe" title="Distribution.Compat.Prelude.Internal">Maybe</a> <a href="Cooked-Tx-Constraints-Type.html#t:MiscConstraint" title="Cooked.Tx.Constraints.Type">MiscConstraint</a>) <a href="src/Cooked.Attack.Tweak.AddConstraints.html#addMintsTweak" class="link">Source</a> <a href="#v:addMintsTweak" class="selflink">#</a></p><div class="doc"><p>This tweak adds a <code><a href="Cooked-Tx-Constraints-Type.html#v:Mints" title="Cooked.Tx.Constraints.Type">Mints</a></code> constraint.</p><p>This tweak always returns <code>Just</code> the added constraint. Its return type is in
 <code><a href="http://hackage.haskell.org/packages/archive/Cabal/latest/doc/html/Distribution-Compat-Prelude-Internal.html#t:Maybe" title="Distribution.Compat.Prelude.Internal">Maybe</a></code> in order to be homogeneous with <code><a href="Cooked-Attack-Tweak-AddConstraints.html#v:addSpendsScriptTweak" title="Cooked.Attack.Tweak.AddConstraints">addSpendsScriptTweak</a></code>,
 <code><a href="Cooked-Attack-Tweak-AddConstraints.html#v:addSpendsPKTweak" title="Cooked.Attack.Tweak.AddConstraints">addSpendsPKTweak</a></code>, <code><a href="Cooked-Attack-Tweak-AddConstraints.html#v:addValidateInTweak" title="Cooked.Attack.Tweak.AddConstraints">addValidateInTweak</a></code>, and <code><a href="Cooked-Attack-Tweak-AddConstraints.html#v:addSignedByTweak" title="Cooked.Attack.Tweak.AddConstraints">addSignedByTweak</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:removeTimeConstraintsTweak" class="def">removeTimeConstraintsTweak</a> :: <a href="Cooked-Attack-Tweak-Common.html#t:Tweak" title="Cooked.Attack.Tweak.Common">Tweak</a> POSIXTimeRange <a href="src/Cooked.Attack.Tweak.AddConstraints.html#removeTimeConstraintsTweak" class="link">Source</a> <a href="#v:removeTimeConstraintsTweak" class="selflink">#</a></p><div class="doc"><p>This tweak removes all time constraints (i.e. <code><a href="Cooked-Tx-Constraints-Type.html#v:Before" title="Cooked.Tx.Constraints.Type">Before</a></code>, <code><a href="Cooked-Tx-Constraints-Type.html#v:After" title="Cooked.Tx.Constraints.Type">After</a></code>, and
 <code><a href="Cooked-Tx-Constraints-Type.html#v:ValidateIn" title="Cooked.Tx.Constraints.Type">ValidateIn</a></code>) from a transaction.</p><p>Returns the validity time range of the unmodified transaction.</p></div></div><div class="top"><p class="src"><a id="v:addValidateInTweak" class="def">addValidateInTweak</a> :: POSIXTimeRange -&gt; <a href="Cooked-Attack-Tweak-Common.html#t:Tweak" title="Cooked.Attack.Tweak.Common">Tweak</a> (<a href="http://hackage.haskell.org/packages/archive/Cabal/latest/doc/html/Distribution-Compat-Prelude-Internal.html#t:Maybe" title="Distribution.Compat.Prelude.Internal">Maybe</a> <a href="Cooked-Tx-Constraints-Type.html#t:MiscConstraint" title="Cooked.Tx.Constraints.Type">MiscConstraint</a>) <a href="src/Cooked.Attack.Tweak.AddConstraints.html#addValidateInTweak" class="link">Source</a> <a href="#v:addValidateInTweak" class="selflink">#</a></p><div class="doc"><p>This tweak restricts the validity time range of a transaction to the
 intersection of the given range and its current validity time range.</p><p>If this tweak performs any change at all, it also &quot;cleans up&quot; the time
 constraints (i.e. <code><a href="Cooked-Tx-Constraints-Type.html#v:Before" title="Cooked.Tx.Constraints.Type">Before</a></code>, <code><a href="Cooked-Tx-Constraints-Type.html#v:After" title="Cooked.Tx.Constraints.Type">After</a></code>, and <code><a href="Cooked-Tx-Constraints-Type.html#v:ValidateIn" title="Cooked.Tx.Constraints.Type">ValidateIn</a></code>), so that the resulting
 transaction has only one <code><a href="Cooked-Tx-Constraints-Type.html#v:ValidateIn" title="Cooked.Tx.Constraints.Type">ValidateIn</a></code> constraint.</p><p>This tweak returns <code>Just</code> the added constraint iff the transaction was
 modified.</p></div></div><div class="top"><p class="src"><a id="v:removeSignedByTweak" class="def">removeSignedByTweak</a> :: <a href="Cooked-Attack-Tweak-Common.html#t:Tweak" title="Cooked.Attack.Tweak.Common">Tweak</a> [PubKeyHash] <a href="src/Cooked.Attack.Tweak.AddConstraints.html#removeSignedByTweak" class="link">Source</a> <a href="#v:removeSignedByTweak" class="selflink">#</a></p><div class="doc"><p>This tweak removes all <code><a href="Cooked-Tx-Constraints-Type.html#v:SignedBy" title="Cooked.Tx.Constraints.Type">SignedBy</a></code> constraints from a transaction. It
 returns a list of the signers it removed.</p></div></div><div class="top"><p class="src"><a id="v:addSignedByTweak" class="def">addSignedByTweak</a> :: [PubKeyHash] -&gt; <a href="Cooked-Attack-Tweak-Common.html#t:Tweak" title="Cooked.Attack.Tweak.Common">Tweak</a> (<a href="http://hackage.haskell.org/packages/archive/Cabal/latest/doc/html/Distribution-Compat-Prelude-Internal.html#t:Maybe" title="Distribution.Compat.Prelude.Internal">Maybe</a> <a href="Cooked-Tx-Constraints-Type.html#t:MiscConstraint" title="Cooked.Tx.Constraints.Type">MiscConstraint</a>) <a href="src/Cooked.Attack.Tweak.AddConstraints.html#addSignedByTweak" class="link">Source</a> <a href="#v:addSignedByTweak" class="selflink">#</a></p><div class="doc"><p>This tweak adds signers to a transaction. It also combines all <code><a href="Cooked-Tx-Constraints-Type.html#v:SignedBy" title="Cooked.Tx.Constraints.Type">SignedBy</a></code>
 constraints of the transaction into one, if it performs any change at all.</p><p>This tweak returns <code>Just</code> the added constraint iff the transaction was
 modified.</p></div></div><a href="#g:2" id="g:2"><h1>Adding and Removing <code>OutConstraint</code>s</h1></a><div class="top"><p class="src"><a id="v:addOutConstraintTweak" class="def">addOutConstraintTweak</a> :: <a href="Cooked-Tx-Constraints-Type.html#t:OutConstraint" title="Cooked.Tx.Constraints.Type">OutConstraint</a> -&gt; <a href="Cooked-Attack-Tweak-Common.html#t:Tweak" title="Cooked.Attack.Tweak.Common">Tweak</a> () <a href="src/Cooked.Attack.Tweak.AddConstraints.html#addOutConstraintTweak" class="link">Source</a> <a href="#v:addOutConstraintTweak" class="selflink">#</a></p><div class="doc"><p>Add an <code><a href="Cooked-Tx-Constraints-Type.html#t:OutConstraint" title="Cooked.Tx.Constraints.Type">OutConstraint</a></code> to a transaction. The additional constraint will be
 added to the end of the list of output constraints. This is because some
 contracts rely on the shape of (the initial segment of) the list of
 transaction outputs. Try <code>permutOutTweak</code> if you want to change the ordering
 of output constraints.</p></div></div><div class="top"><p class="src"><a id="v:removeOutConstraintsTweak" class="def">removeOutConstraintsTweak</a> :: (<a href="Cooked-Tx-Constraints-Type.html#t:OutConstraint" title="Cooked.Tx.Constraints.Type">OutConstraint</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/Cabal/latest/doc/html/Distribution-Compat-Prelude-Internal.html#t:Maybe" title="Distribution.Compat.Prelude.Internal">Maybe</a> a) -&gt; <a href="Cooked-Attack-Tweak-Common.html#t:Tweak" title="Cooked.Attack.Tweak.Common">Tweak</a> [a] <a href="src/Cooked.Attack.Tweak.AddConstraints.html#removeOutConstraintsTweak" class="link">Source</a> <a href="#v:removeOutConstraintsTweak" class="selflink">#</a></p><div class="doc"><p>This tweak removes some <code><a href="Cooked-Tx-Constraints-Type.html#t:OutConstraint" title="Cooked.Tx.Constraints.Type">OutConstraint</a></code>s from a transaction. Exactly those
 constraints that return <code>Just</code> something are removed from the transaction.</p><p>The tweak returns a list of all the <code>Just</code> values that were returned by the
 removed constraints.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.24.0</p></div></body></html>