<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Cooked.Attack.DoubleSat</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">cooked-validators-0.2.0</span><ul class="links" id="page-menu"><li><a href="src/Cooked.Attack.DoubleSat.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Cooked.Attack.DoubleSat</p></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:DSSplitMode">DSSplitMode</a><ul class="subs"><li>= <a href="#v:TryCombinations">TryCombinations</a></li><li>| <a href="#v:AllSeparate">AllSeparate</a></li></ul></li><li class="src short"><a href="#v:doubleSatAttack">doubleSatAttack</a> :: Is k A_Traversal =&gt; Optic' k is <a href="Cooked-Tx-Constraints-Type.html#t:TxSkel" title="Cooked.Tx.Constraints.Type">TxSkel</a> a -&gt; (<a href="Cooked-MockChain-Monad-Direct.html#t:MockChainSt" title="Cooked.MockChain.Monad.Direct">MockChainSt</a> -&gt; a -&gt; [<a href="Cooked-Tx-Constraints-Type.html#t:Constraints" title="Cooked.Tx.Constraints.Type">Constraints</a>]) -&gt; <a href="Cooked-MockChain-Wallet.html#t:Wallet" title="Cooked.MockChain.Wallet">Wallet</a> -&gt; <a href="Cooked-Attack-DoubleSat.html#t:DSSplitMode" title="Cooked.Attack.DoubleSat">DSSplitMode</a> -&gt; <a href="Cooked-Attack-Tweak-Common.html#t:Tweak" title="Cooked.Attack.Tweak.Common">Tweak</a> ()</li><li class="src short"><span class="keyword">data</span> <a href="#t:DoubleSatLbl">DoubleSatLbl</a> = <a href="#v:DoubleSatLbl">DoubleSatLbl</a></li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:DSSplitMode" class="def">DSSplitMode</a> <a href="src/Cooked.Attack.DoubleSat.html#DSSplitMode" class="link">Source</a> <a href="#t:DSSplitMode" class="selflink">#</a></p><div class="doc"><p>How to combine extra constraints added for different reasons in the
 <code><a href="Cooked-Attack-DoubleSat.html#v:doubleSatAttack" title="Cooked.Attack.DoubleSat">doubleSatAttack</a></code>. See the comments there.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:TryCombinations" class="def">TryCombinations</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:AllSeparate" class="def">AllSeparate</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><a id="v:doubleSatAttack" class="def">doubleSatAttack</a> <a href="src/Cooked.Attack.DoubleSat.html#doubleSatAttack" class="link">Source</a> <a href="#v:doubleSatAttack" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: Is k A_Traversal</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; Optic' k is <a href="Cooked-Tx-Constraints-Type.html#t:TxSkel" title="Cooked.Tx.Constraints.Type">TxSkel</a> a</td><td class="doc"><p>Each focus of this optic is a potential reason to add some extra
 constraints.</p><p>As an example, one could go through the <code><a href="Cooked-Tx-Constraints-Type.html#v:PaysScript" title="Cooked.Tx.Constraints.Type">PaysScript</a></code> constraints for
 validators of type <code>t</code> with the following traversal:</p><pre>paysScriptConstraintsT % paysScriptConstraintTypeP @t</pre></td></tr><tr><td class="src">-&gt; (<a href="Cooked-MockChain-Monad-Direct.html#t:MockChainSt" title="Cooked.MockChain.Monad.Direct">MockChainSt</a> -&gt; a -&gt; [<a href="Cooked-Tx-Constraints-Type.html#t:Constraints" title="Cooked.Tx.Constraints.Type">Constraints</a>])</td><td class="doc"><p>Which constraints to add, for each of the foci. There might be different
 options for each focus, that's why the return value is a list.</p><p>Continuing the example, for each of the focused <code><a href="Cooked-Tx-Constraints-Type.html#v:PaysScript" title="Cooked.Tx.Constraints.Type">PaysScript</a></code> constraints,
 you might want to try adding some <code><a href="Cooked-Tx-Constraints-Type.html#v:SpendsScript" title="Cooked.Tx.Constraints.Type">SpendsScript</a></code> constraints to the
 transaction. Since it might be interesting to try different redeemers on
 these extra <code><a href="Cooked-Tx-Constraints-Type.html#v:SpendsScript" title="Cooked.Tx.Constraints.Type">SpendsScript</a></code> constraints, you can just provide a list of all
 the options you want to try adding for a given <code><a href="Cooked-Tx-Constraints-Type.html#v:PaysScript" title="Cooked.Tx.Constraints.Type">PaysScript</a></code> that's already
 on the transaction.</p></td></tr><tr><td class="src">-&gt; <a href="Cooked-MockChain-Wallet.html#t:Wallet" title="Cooked.MockChain.Wallet">Wallet</a></td><td class="doc"><p>The wallet of the attacker, where any surplus is paid to.</p><p>In the example, the extra value in the added <code><a href="Cooked-Tx-Constraints-Type.html#v:SpendsScript" title="Cooked.Tx.Constraints.Type">SpendsScript</a></code> constraints
 will be paid to the attacker.</p></td></tr><tr><td class="src">-&gt; <a href="Cooked-Attack-DoubleSat.html#t:DSSplitMode" title="Cooked.Attack.DoubleSat">DSSplitMode</a></td><td class="doc"><p>Since there are potentially multiple <code><a href="Cooked-Tx-Constraints-Type.html#t:Constraints" title="Cooked.Tx.Constraints.Type">Constraints</a></code> produced for each of
 the foci, the question is whether (and how) to combine additions that were
 triggered by different foci.</p><p>In the example: Let's say that the unmodified transaction had three focused
 <code><a href="Cooked-Tx-Constraints-Type.html#v:PaysScript" title="Cooked.Tx.Constraints.Type">PaysScript</a></code> constraints (let's denote them by a, b, and c), and that you
 want to try 2, 3, and 5 additional <code><a href="Cooked-Tx-Constraints-Type.html#v:SpendsScript" title="Cooked.Tx.Constraints.Type">SpendsScript</a></code> constraints for each of
 them, respectively (let's call those a1, a2, and b1, b2, b3, and c1, c2,
 c3, c4, c5).</p><ul><li>If you want to try each additional <code><a href="Cooked-Tx-Constraints-Type.html#v:SpendsScript" title="Cooked.Tx.Constraints.Type">SpendsScript</a></code> on its own modified
   transaction, use <code><a href="Cooked-Attack-DoubleSat.html#v:AllSeparate" title="Cooked.Attack.DoubleSat">AllSeparate</a></code>. Thus, there'll be 2+3+5=10 modified
   transactions. Namely, for each element of the list</li></ul><pre>[a1, a2, b1, b2, b3, c1, c2, c3, c4, c5]  ,</pre><p>you'll get one modified transaction that includes that constraint.</p><ul><li>If you want to try combining all options from one focus with all options
   from all of the other foci, use <code><a href="Cooked-Attack-DoubleSat.html#v:TryCombinations" title="Cooked.Attack.DoubleSat">TryCombinations</a></code>. Then, there'll be
   (2+1)*(3+1)*(5+1)=72 possible combinations, if you include all of the
   combinations where <em>at most</em> three (one for each focus) extra constraints
   are added. One of these combinations is of course the one where nothing
   is added, and that one is omitted, which brings the grand total down to
   71 modified transactions, the additional <code><a href="Cooked-Tx-Constraints-Type.html#v:SpendsScript" title="Cooked.Tx.Constraints.Type">SpendsScript</a></code> constraints of
   which are given by the following list:</li></ul><pre>[ -- one additional constraint (the 10 cases from above)
  [a1],
  [a2],
  ...
  [c4],
  [c5],

  -- two additional constraints, from different foci (2*3 + 2*5 + 3*5 = 31 cases)
  [a1, b1],
  [a1, b2],
  ...
  [b3, c4],
  [b3, c5],

  -- three additional constraints, one from each focus (2*3*5 = 30 cases)
  [a1, b1, c1],
  [a1, b1, c2],
  ...
  [a1, b3, c4],
  [a1, b3, c5]
]</pre><p>So you see that this attack can branch quite wildly. Use with caution!</p></td></tr><tr><td class="src">-&gt; <a href="Cooked-Attack-Tweak-Common.html#t:Tweak" title="Cooked.Attack.Tweak.Common">Tweak</a> ()</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Double satisfacion attack. See the comment above for what such an attack is
 about conceptually.</p><p>This attack consists in adding some extra constraints to a transaction, and
 hoping that the additional minting policies or validator scripts thereby
 involved are fooled by what's already present on the transaction. Any extra
 value contained in new inputs to the transaction is then paid to the
 attacker.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:DoubleSatLbl" class="def">DoubleSatLbl</a> <a href="src/Cooked.Attack.DoubleSat.html#DoubleSatLbl" class="link">Source</a> <a href="#t:DoubleSatLbl" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:DoubleSatLbl" class="def">DoubleSatLbl</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:DoubleSatLbl">Instances</h4><details id="i:DoubleSatLbl" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:DoubleSatLbl:Eq:1"></span> <a href="http://hackage.haskell.org/packages/archive/Cabal/latest/doc/html/Distribution-Compat-Prelude-Internal.html#t:Eq" title="Distribution.Compat.Prelude.Internal">Eq</a> <a href="Cooked-Attack-DoubleSat.html#t:DoubleSatLbl" title="Cooked.Attack.DoubleSat">DoubleSatLbl</a></span> <a href="src/Cooked.Attack.DoubleSat.html#line-174" class="link">Source</a> <a href="#t:DoubleSatLbl" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:DoubleSatLbl:Eq:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Cooked-Attack-DoubleSat.html">Cooked.Attack.DoubleSat</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Cooked-Attack-DoubleSat.html#t:DoubleSatLbl" title="Cooked.Attack.DoubleSat">DoubleSatLbl</a> -&gt; <a href="Cooked-Attack-DoubleSat.html#t:DoubleSatLbl" title="Cooked.Attack.DoubleSat">DoubleSatLbl</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/Cabal/latest/doc/html/Distribution-Compat-Prelude-Internal.html#t:Bool" title="Distribution.Compat.Prelude.Internal">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Cooked-Attack-DoubleSat.html#t:DoubleSatLbl" title="Cooked.Attack.DoubleSat">DoubleSatLbl</a> -&gt; <a href="Cooked-Attack-DoubleSat.html#t:DoubleSatLbl" title="Cooked.Attack.DoubleSat">DoubleSatLbl</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/Cabal/latest/doc/html/Distribution-Compat-Prelude-Internal.html#t:Bool" title="Distribution.Compat.Prelude.Internal">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:DoubleSatLbl:Show:2"></span> <a href="http://hackage.haskell.org/packages/archive/Cabal/latest/doc/html/Distribution-Compat-Prelude-Internal.html#t:Show" title="Distribution.Compat.Prelude.Internal">Show</a> <a href="Cooked-Attack-DoubleSat.html#t:DoubleSatLbl" title="Cooked.Attack.DoubleSat">DoubleSatLbl</a></span> <a href="src/Cooked.Attack.DoubleSat.html#line-174" class="link">Source</a> <a href="#t:DoubleSatLbl" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:DoubleSatLbl:Show:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Cooked-Attack-DoubleSat.html">Cooked.Attack.DoubleSat</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="http://hackage.haskell.org/packages/archive/Cabal/latest/doc/html/Distribution-Compat-Prelude-Internal.html#t:Int" title="Distribution.Compat.Prelude.Internal">Int</a> -&gt; <a href="Cooked-Attack-DoubleSat.html#t:DoubleSatLbl" title="Cooked.Attack.DoubleSat">DoubleSatLbl</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/Cabal/latest/doc/html/Distribution-Compat-Prelude-Internal.html#t:ShowS" title="Distribution.Compat.Prelude.Internal">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Cooked-Attack-DoubleSat.html#t:DoubleSatLbl" title="Cooked.Attack.DoubleSat">DoubleSatLbl</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/Cabal/latest/doc/html/Distribution-Compat-Prelude-Internal.html#t:String" title="Distribution.Compat.Prelude.Internal">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Cooked-Attack-DoubleSat.html#t:DoubleSatLbl" title="Cooked.Attack.DoubleSat">DoubleSatLbl</a>] -&gt; <a href="http://hackage.haskell.org/packages/archive/Cabal/latest/doc/html/Distribution-Compat-Prelude-Internal.html#t:ShowS" title="Distribution.Compat.Prelude.Internal">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr></table></details></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.24.0</p></div></body></html>